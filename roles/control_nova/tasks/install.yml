- name: Install the packages
  yum:
    name: 
      - openstack-nova-api
      - openstack-nova-conductor
      - openstack-nova-console
      - openstack-nova-novncproxy
      - openstack-nova-scheduler
      - openstack-nova-placement-api
    state: present

- name: config nova
  template:
    src: nova.conf
    dest: /etc/nova/nova.conf
    owner: root
    group: nova
    mode: "0640"

- name:
  shell: ls /root/{{item}}
  with_items:
    - 1.txt
    - 2.txt
    - 3.txt
    - 6.txt
  run_once: true
  ignore_errors: yes
  register: info

- debug: var=info.results
  run_once: true

- name:
  shell: echo "{{item[0]}}&{{item[1].rc}}" >> /root/5.txt
  with_together:
    - [a,b]
    - "{{info.results}}"
